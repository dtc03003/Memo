# 📚 CORS

## 📕 CORS란?

![](https://velog.velcdn.com/images/dtc03003/post/927fab4c-c5dd-472a-90a3-feb49959a1a4/image.png)

> `CORS(Cross-Origin Resource Sharing)` 직역하면 `교차 출처 리소스 공유 정책`  
> 즉 출처가 다른 자원들을 공유한다는 뜻으로, 한 출처에 있는 자원에서 다른 출처에 있는 자원에 접근하도록 하는 개념

<br/>

### 📖 출처(Origin)란?

사이트를 접속할때 `URL`이라는 문자열을 통해 접근한다. 하나의 문자열 같아 보여도, 사실은 여러 개의 구성 요소로 이루어져있다.

![](https://velog.velcdn.com/images/dtc03003/post/3842c1e7-3b42-47b9-a341-dd63b7c6d134/image.png)

-   `Protocol` : http, https
-   `Host`: 사이트 도메인
-   `Port`: 포트 번호(생략 가능)
-   `Path`: 사이트 내부 경로
-   `Query string` : 요청의 key와 value값
-   `Fragment` : 해시태그

이 중 `출처(Origin)`는 URL의 `프로토콜`, `호스트`, `포트` 이 3가지로 정의 된다.  
즉 어떤 URL이 같은 출처인지를 판단하려면 URL의 `프로토콜`, `호스트`, `포트`가 모두 같은지 확인하면 된다.

<br/>

### 📖 SOP(Same-Origin-Policy)란?

CORS를 알아보기 전에 그 배경이 되는 `SOP`에 대해 먼저 알아볼 필요가 있다.  
`SOP`는 "동일한 출처 사이에서만 리소스를 공유할 수 있다는 규칙"을 가지고 있다.

![](https://velog.velcdn.com/images/dtc03003/post/bb0bcce2-3d73-448e-8191-9a6aed3ab31d/image.png)

모든 처리가 같은 도메인 내에서 일어난다는 것 이다. 따라서 애초에 브라우저에서 다른 오리진으로 요청을 보낼 필요가 없었다. Ajax 를 통해 제한적으로 보낸다 하더라도, 같은 도메인 내에서 호출하므로 큰 문제가 없었다.

오히려 그 당시에는 다른 출처로 요청을 보내는 것을 악의적인 행위(CSRF, XSS 등)로 간주하는 것이 자연스러웠고, 따라서 출처가 다른 곳으로 요청하는 것 자체를 브라우저 차원에서 막았던 것 이었다. 하지만 시대의 흐름에 따라 웹 기술로 할 수 있는 것들이 많아졌고, 자연스럽게 다른 출처로 요청을 하고 응답을 받아오는 수요가 증가했다.

-   CSRF - 사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위를 특정 웹사이트에 요청하게 하는 공격

<br/>

### 📖 CORS(Cross-Origin Resource Sharing)

이처럼 `교차 출처 리소스 공유(Cross-Origin Resource Sharing)`는 단어 그대로 다른 출처의 리소스 공유에 대한 허용/비허용 정책이다.

보안이 중요하지만 개발을 하다 보면 기능상 어쩔 수 없이 다른 출처 간의 상호작용을 해야 하는 케이스도 있다. 따라서 이와 같은 예외 사항을 두기 위해 CORS 정책을 허용하는 리소스에 한해 다른 출처라도 받아들인다는 것이다.
